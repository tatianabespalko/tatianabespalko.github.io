
This repository
Search
Pull requests
Issues
Marketplace
Explore
 @tatianabespalko
 Sign out
 Watch 1
  Fork 1 AIexey-L/Mkdev
 Code  Issues 0  Pull requests 1  Projects 0  Wiki Insights 
Branch: master Find file Copy pathMkdev/lesson_5/movie.rb
af1dc7d  on 8 Dec 2016
@AIexey-L AIexey-L added different match? for arrays and non-arrays with ===
1 contributor
RawBlameHistory    
48 lines (36 sloc)  1.24 KB
require 'csv'
require 'ostruct'
require 'date'
require_relative './moviecollection.rb'

class Movie

  attr_accessor :link, :name, :year, :country, :release_date, :genre, :length, :rating, :director, :actors, :collection, :month, :release_year

  def initialize (film_collection, film)
    film.each { |k,v| instance_variable_set("@#{k}", v) }
    @collection = film_collection
    @genre = @genre.to_s.split(",")
    @actors = @actors.to_s.split(",")
    @release_year = @release_date.to_s[0..3].to_i
  end

  def inspect
    format("| %50s | %10s | %12s | %27s | %7s | %3s | %23s | %s", "#{@name}", "#{@release_date}", "#{@country}", "#{@genre}", "#{@length}", "#{@rating}", "#{@director}", "#{@actors}\n")
  end

  def year
    @release_year
  end

  def month
    if @release_date.to_s[6..7] != nil
     @month = Date.strptime(@release_date, "%Y-%m").strftime("%B")
    end
  end

  def match? (filter_name, filter_value)
    if send(filter_name).is_a?(Array)
      send(filter_name).any? { |val| filter_value ===  val }
    else
      filter_value === send(filter_name)
    end
  end

  def has_genre? (genre)
      raise ArgumentError, "Genre \"#{genre}\" do not exist in collection" unless @collection.genre_exist?(genre)
      @genre.include?(genre)
  end
  
end